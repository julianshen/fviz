(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[340],{7059:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return E}});var a=n(2809),r=n(8358),i=n(7812),o=n(2318),s=n(2112),c=n(5258),d=n(266),l=n(809),u=n.n(l),p=n(7294),f=n(3766),h=n(9956),g=n(5893);function x(t){var e=Number(t.data.Change),n=Number(t.data.OpeningPrice);return(isNaN(e)||n<=0)&&(e=0),e>0?f.cJy().domain([0,9]).interpolator(f.sXR("#803010","#d01010"))(e/n*100):e<0?f.cJy().domain([0,9]).interpolator(f.sXR("#108030","#10d010"))(-1*e/n*100):"#a0a0a0"}var y=function(){var t=f.Ys(".tooltip");return t.empty()?f.Ys("body").append("div").attr("id","tooltip").attr("class","tooltip").style("opacity",0).style("background-color","white").style("border","solid").style("border-width","2px").style("border-radius","5px").style("padding","5px").style("position","absolute"):t},m=function(t){var e=(0,p.useRef)(null),n="data/"+t.date.getFullYear()+"-"+(t.date.getMonth()+1).toString().padStart(2,"0")+"-"+t.date.getDate().toString().padStart(2,"0")+".json",a=function(){var a=(0,d.Z)(u().mark((function a(){var r,i,o,s;return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(r=f.Ys(e.current).style("font","10px sans-serif")).attr("width",t.width).attr("height",t.height),r.selectAll("*").remove(),a.prev=3,a.next=6,f.AVB(n);case 6:i=a.sent,a.next=13;break;case 9:return a.prev=9,a.t0=a.catch(3),r.append("text").text("\u672c\u65e5\u7121\u8cc7\u6599, \u8acb\u6309\u5de6\u4e0a\u89d2\u6309\u9215\u9078\u53d6\u6642\u9593").attr("x",6).attr("y",22).attr("stroke","white"),a.abrupt("return");case 13:(function t(e){if(e.children&&e.children.forEach((function(e){t(e)})),e.data){var n=Number(e.data.TradeVolume);n=isNaN(n)?0:n,e.value=(""+n).length}})(i),o=f.bT9(i).sum((function(t){return t.value?Number(t.value):0})).sort((function(t,e){return t.data.data&&e.data.data?e.data.data.TradeValue-t.data.data.TradeValue:0})),f.pNI().size([t.width,t.height]).paddingOuter(3).paddingTop(19).paddingInner(1).round(!0)(o),s=function(t,e){var n=e.data.data.Change;y().html('\n                <table width="100%" style="color:black;">\n                    <tr >\n                        <th>'.concat(e.data.data.Code,'</td>\n                        <td rowspan="2">').concat(e.data.data.ClosingPrice,'</td>\n                        <td rowspan="2" style="border-width:1px;border-radius:5px;color:white;background-color: ').concat(x(e.data),'">').concat(n,'</td>\n                    </tr>\n                    <tr>\n                        <th style="font-size: 12px">').concat(e.data.data.Name,"</td>\n                    </tr>\n                </table>\n            ")).style("left",t.pageX+4+"px").style("top",t.pageY+4+"px").transition().duration(200).style("opacity",.9)},r.selectAll("rect").data(o.leaves()).enter().append("rect").attr("x",(function(t){return t.x0})).attr("y",(function(t){return t.y0})).attr("width",(function(t){return t.x1-t.x0})).attr("height",(function(t){return t.y1-t.y0})).style("stroke","black").style("fill",(function(t){return x(t.data)})).on("mouseover",(function(t,e){s(t,e)})).on("mouseleave",(function(){y().style("opacity",0)})),r.selectAll("text").data(o.leaves()).enter().append("text").attr("x",(function(t){return t.x0+1})).attr("y",(function(t){return t.y0+7})).text((function(t){return t.x1-t.x0<20||t.y1-t.y0<8?"":t.data.name})).attr("font-size","8px").attr("fill","white").on("mouseover",(function(t,e){s(t,e)})).on("mouseleave",(function(){y().style("opacity",0)})),r.selectAll("titles").data(o.descendants().filter((function(t){return t.depth<3}))).enter().append("text").attr("x",(function(t){return t.x0+2})).attr("y",(function(t){return t.y0+16})).text((function(t){return t.data.name})).attr("font-size","10px").attr("fill","white");case 21:case"end":return a.stop()}}),a,null,[[3,9]])})));return function(){return a.apply(this,arguments)}}();return(0,p.useEffect)((function(){a()})),(0,g.jsx)(h.Z,{children:(0,g.jsx)("svg",{ref:e})})},w=n(1120),v=n(7623),b=n(6010),j=n(7827),O=n(869),N=n(9559),Z=n(6136),k=n(2156),S=n(8953);function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){(0,a.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var C=320,D=(0,w.Z)((function(t){return(0,v.Z)({root:{display:"flex"},appBar:{transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(C,"px)"),marginLeft:C,transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})},drawer:{width:C,flexShrink:0},title:{flexGrow:1},container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:t.spacing(1),marginRight:t.spacing(1),width:200},content:{flexGrow:1,padding:t.spacing(3),transition:t.transitions.create("margin",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),marginLeft:-320,marginTop:"50px"},contentShift:{transition:t.transitions.create("margin",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen}),marginLeft:0},menuButton:{marginRight:t.spacing(2)},hide:{display:"none"},drawerPaper:{width:C},drawerHeader:_(_({display:"flex",alignItems:"center",padding:t.spacing(0,1)},t.mixins.toolbar),{},{justifyContent:"flex-end"})})}));function E(){var t=D(),e=(0,p.useState)(!1),n=e[0],d=e[1],l=(0,p.useState)(new Date),u=l[0],f=l[1];return(0,g.jsxs)("div",{className:t.root,children:[(0,g.jsx)(c.Z,{position:"fixed",className:(0,b.Z)(t.appBar,(0,a.Z)({},t.appBarShift,n)),children:(0,g.jsxs)(r.Z,{children:[(0,g.jsx)(i.Z,{color:"inherit","aria-label":"open drawer",onClick:function(){d(!0)},edge:"start",className:(0,b.Z)(t.menuButton,n&&t.hide),children:(0,g.jsx)(Z.Z,{})}),(0,g.jsx)(o.Z,{variant:"h6",className:t.title,children:"\u53f0\u80a1\u677f\u584a\u5716"})]})}),(0,g.jsxs)(s.ZP,{className:t.drawer,variant:"persistent",anchor:"left",open:n,classes:{paper:t.drawerPaper},children:[(0,g.jsx)("div",{className:t.drawerHeader,children:(0,g.jsx)(i.Z,{onClick:function(){d(!1)},children:(0,g.jsx)(k.Z,{})})}),(0,g.jsx)(j.M,{utils:N.Z,locale:S.Z,children:(0,g.jsx)(O.M,{value:u,onChange:function(t){var e;f(new Date(null!==(e=null===t||void 0===t?void 0:t.getTime())&&void 0!==e?e:new Date))},maxDate:new Date,variant:"static"})})]}),(0,g.jsx)("main",{className:(0,b.Z)(t.content,(0,a.Z)({},t.contentShift,n)),children:(0,g.jsx)(m,{width:800,height:1920,date:u})})]})}},7137:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/marketmap",function(){return n(7059)}])}},function(t){t.O(0,[442,197,774,888,179],(function(){return e=7137,t(t.s=e);var e}));var e=t.O();_N_E=e}]);